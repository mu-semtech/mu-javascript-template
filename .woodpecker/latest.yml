steps:
  build-and-push:
    image: redpencil/plugin-docker-buildx:latest
    pull: true
    settings:
      repo: ${CI_REPO/mu-semtech/semtech}
      tags: latest
      platforms: linux/amd64,linux/arm64
      username:
        from_secret: docker_username
      password:
        from_secret: docker_password
      ssh_key:
        from_secret: ssh_key
when:
  - event: push
    branch: [master, main]
